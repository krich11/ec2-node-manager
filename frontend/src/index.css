@tailwind base;
@tailwind components;
@tailwind utilities;

/* Base React Flow node class - ensure it can be dragged by default */
.react-flow__node {
    pointer-events: auto; /* Allows clicks/drags on the node background */
    position: relative; /* Needed for z-index and absolute children */
    z-index: 1; /* Base z-index for nodes */
}

/* Styling to specifically allow dragging by the node content */
.react-flow__node-drag-handle {
    cursor: grab; /* Show grab cursor on the draggable area */
    width: 100%;
    height: 100%;
}

/* Elements with the nodrag class should not initiate node dragging */
.nodrag {
  pointer-events: all !important; /* Ensure clicks are captured by these elements */
  cursor: default !important;
}

/* Basic styling for centered handles */
.react-flow__handle.center-handle {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid #555;
  pointer-events: all; /* Ensure handles are interactive for connecting */
  z-index: 10; /* Ensure handles are above text/icons */
}

/* Styling for the source handle (smaller, visible, can initiate drags) */
.react-flow__handle.center-handle.source-handle-style {
  width: 10px;
  height: 10px;
  background-color: rgba(34, 139, 230, 0.8);
  border-radius: 50%;
  z-index: 11;
  cursor: crosshair;
}

/* Styling for the target handle (fills the node, underneath source) */
.react-flow__handle.center-handle.target-handle-style {
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
  transform: none;
  background-color: transparent; /* Make it invisible */
  border: none;
  border-radius: 8px;
  z-index: 9;
  pointer-events: none; /* Don't interfere with dragging */
}

/* Make target handle capture connections but not block dragging */
.react-flow__handle.center-handle.target-handle-style.connecting {
  pointer-events: all; /* Only capture events when connecting */
}

/* Ensure node content is clickable */
.custom-node .node-label {
    z-index: 10;
    position: relative;
    pointer-events: auto;
}

/* Ensure the MoreHorizontal icon is clickable */
.custom-node .p-1 .opacity-60.cursor-pointer {
    z-index: 10;
    position: relative;
    pointer-events: auto;
}

/* Styling for the context menu - fixed positioning relative to viewport */
.node-context-menu {
    position: fixed;
    z-index: 9999;
    pointer-events: auto;
}

/* Ensure connecting edges work properly - improve visibility of connection line */
.react-flow__connection-path {
    stroke: #3182ce;
    stroke-width: 2;
}

/* Add specific style for active connection handles */
.react-flow__handle.connecting {
    background-color: #3182ce;
}
